<div class="heading-container">
    <h2 class="mb-4">Danh sách Lương</h2>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th scope="col">ID </th>
          <th scope="col">Nhân viên</th>
          <th scope="col">Ngày thanh toán</th>
          <th scope="col">Ngày làm việc</th>
          <th scope="col">Tiền ứng</th>
          <th scope="col">Phụ cấp</th>
          <th scope="col">Lương tháng</th>
          <th scope="col">Thao tác</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let salary of salaries">
          <td>{{ salary.id }}</td>
          <td>{{ salary.employeeName }}</td>
          <td>{{ salary.payDate }}</td>
          <td>{{ salary.workingDays }}</td>
          <td>{{ salary.advance }}</td>
          <td>{{ salary.allowance }}</td>
          <td>{{ salary.monthlySalary }}</td> <!-- Hiển thị giá trị của cột monthlySalary -->
          <td>
            <button class="btn btn-primary btn-sm" (click)="showUpdateForm(salary)">Sửa</button>
            <button class="btn btn-danger btn-sm" (click)="deleteSalary(salary.id)">Xóa</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="mt-4">
    <button class="btn btn-primary" (click)="toggleAddForm()">Thêm mới</button>
  </h3>

  <!-- Modal for Add Salary -->
  <div *ngIf="showAddForm" class="modal-overlay">
    <div class="modal-container">
      <div class="modal-content">
        <form (submit)="addSalary()">
          <div class="modal-header">
            <h5 class="modal-title">Thêm mới Lương</h5>
            <button type="button" class="close" (click)="closeModal()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">

            <div class="form-group">
              <label for="employee">Nhân viên:</label>
              <select id="employee" class="form-control" [(ngModel)]="newSalary.employeeName" required>
                <option *ngFor="let employee of employees" [ngValue]="employee">{{ employee.name }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="payDate">Ngày thanh toán:</label>
              <input type="date" id="payDate" class="form-control" [(ngModel)]="newSalary.payDate" required>
            </div>
            <div class="form-group">
              <label for="workingDays">Ngày làm việc:</label>
              <input type="number" id="workingDays" class="form-control" [(ngModel)]="newSalary.workingDays" required>
            </div>
            <div class="form-group">
              <label for="advance">Tiền ứng:</label>
              <input type="number" id="advance" class="form-control" [(ngModel)]="newSalary.advance" required>
            </div>
            <div class="form-group">
              <label for="allowance">Phụ cấp:</label>
              <input type="number" id="allowance" class="form-control" [(ngModel)]="newSalary.allowance" required>
            </div>
            <div class="form-group">
              <label for="monthlySalary">Lương tháng:</label>
              <input type="number" id="monthlySalary" class="form-control" [(ngModel)]="newSalary.monthlySalary" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Thêm</button>
            <button type="button" class="btn btn-secondary" (click)="closeModal()">Hủy</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal for Update Salary -->
  <div *ngIf="isUpdateFormVisible" class="modal-overlay">
    <div class="modal-container">
      <div class="modal-content">
        <form (ngSubmit)="updateSalary()">
          <div class="modal-header">
            <h5 class="modal-title">Cập nhật Lương</h5>
            <button type="button" class="close" (click)="closeModal()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="updateEmployee">Nhân viên:</label>
              <select id="updateEmployee" class="form-control" [(ngModel)]="selectedSalary.employeeName" required>
                <option *ngFor="let employee of employees" [ngValue]="employee">{{ employee.name }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="updatePayDate">Ngày thanh toán:</label>
              <input type="date" id="updatePayDate" class="form-control" [(ngModel)]="selectedSalary.payDate" required>
            </div>
            <div class="form-group">
              <label for="updateWorkingDays">Ngày làm việc:</label>
              <input type="number" id="updateWorkingDays" class="form-control" [(ngModel)]="selectedSalary.workingDays" required>
            </div>
            <div class="form-group">
              <label for="updateAdvance">Tiền ứng:</label>
              <input type="number" id="updateAdvance" class="form-control" [(ngModel)]="selectedSalary.advance" required>
            </div>
            <div class="form-group">
              <label for="updateAllowance">Phụ cấp:</label>
              <input type="number" id="updateAllowance" class="form-control" [(ngModel)]="selectedSalary.allowance
              " required>
            </div>
            <div class="form-group">
              <label for="updateMonthlySalary">Lương tháng:</label>
              <input type="number" id="updateMonthlySalary" class="form-control" [(ngModel)]="selectedSalary.monthlySalary" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Cập nhật</button>
            <button type="button" class="btn btn-secondary" (click)="closeModal()">Hủy</button>
          </div>
        </form>
      </div>
    </div>
  </div>
